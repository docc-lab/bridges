# Bridges Project

This repository contains tools for trace reconstruction and analysis, specifically designed to reconstruct traces with data loss using ancestry data stored within span objects.

## Jaeger Trace Loader

The `jaeger_trace_loader.go` tool provides functionality to load and analyze traces from a Jaeger backend deployed in Kubernetes.

### Features

- **Trace Loading**: Fetches traces from Jaeger backend via REST API
- **Service Discovery**: Automatically discovers available services
- **Bloom Filter Optimization**: Efficient trace ID lookups using bloom filters
- **Trace Caching**: Reduces redundant API calls with intelligent caching
- **Statistics**: Provides detailed statistics about loaded traces and filter performance

### Usage

```bash
cd /users/dhuye/bridges
go run jaeger_trace_loader.go
```

### Configuration

The loader connects to Jaeger using the service name `jaeger-ctr:16686` (based on Kubernetes service configuration). It loads up to 10 traces per service by default.

### Output

The tool provides:
- List of available services
- Per-service trace counts
- Total traces loaded across all services
- Detailed trace information (ID, span count)
- Bloom filter statistics
- Cache performance metrics

### Dependencies

- Go 1.25.2+
- `github.com/bits-and-blooms/bloom` for efficient trace lookups

### Jaeger Backend Configuration

The loader expects Jaeger to be deployed with the following service configuration:
- **Service Name**: `jaeger-ctr`
- **API Port**: `16686`
- **OTLP Port**: `4317`
- **Thrift Port**: `14268`

This matches the configuration generated by the blueprint-docc-mod project in `examples/sockshop/build/k8s/`.